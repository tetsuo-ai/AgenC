{
  "id": "cli.replay.compare.mismatch",
  "version": 1,
  "command": "replay.compare",
  "input": {
    "argv": [
      "replay",
      "compare",
      "--local-trace-path",
      "/tmp/compare-trace-mismatch.json",
      "--store-type",
      "memory"
    ]
  },
  "output": {
    "schema": "replay.compare.output.v1",
    "shape": {
      "status": "ok",
      "command": "replay.compare",
      "schema": "replay.compare.output.v1",
      "localTracePath": "fixture-compare-mismatch-trace.json",
      "strictness": "lenient",
      "strictMode": false,
      "storeType": "memory",
      "result": {
        "status": "mismatched",
        "strictness": "lenient",
        "localEventCount": 3,
        "projectedEventCount": 3,
        "mismatchCount": 3,
        "matchRate": 0,
        "anomalyIds": [
          "41bb6177c012c18b",
          "772934e75f651e53",
          "8a6953c6541a4b7b"
        ],
        "topAnomalies": [
          {
            "anomalyId": "f50ef9bb100f23e6",
            "code": "type_mismatch",
            "severity": "error",
            "message": "event type mismatch at seq=1",
            "sourceEventName": "taskCreated",
            "signature": "SIGCLITASKCREATED",
            "seq": 1
          },
          {
            "anomalyId": "9002c61d1ba615e8",
            "code": "hash_mismatch",
            "severity": "error",
            "message": "deterministic replay hash mismatch"
          },
          {
            "anomalyId": "5a1afa8a72dc58be",
            "code": "transition_invalid",
            "severity": "warning",
            "message": "[local] unknown event type \"discovered-mismatch\" at seq=1"
          }
        ],
        "hashes": {
          "local": "cd682a13e268f5f0897d6f9595a9bdabcb9d6104330098dd9bc16a50f4879e98",
          "projected": "4a82760b0803300f6e93d6378eb22c711b73137da711c35f1e2fb0d7374ff3b3"
        },
        "localSummary": {
          "deterministicHash": "cd682a13e268f5f0897d6f9595a9bdabcb9d6104330098dd9bc16a50f4879e98",
          "errors": [],
          "warnings": [
            "unknown event type \"discovered-mismatch\" at seq=1"
          ],
          "summary": {
            "totalEvents": 3,
            "taskCount": 1,
            "completedTasks": 1,
            "failedTasks": 0,
            "escalatedTasks": 0,
            "policyViolations": 0,
            "verifierVerdicts": 0,
            "speculationAborts": 0
          }
        },
        "projectedSummary": {
          "deterministicHash": "4a82760b0803300f6e93d6378eb22c711b73137da711c35f1e2fb0d7374ff3b3",
          "errors": [],
          "warnings": [],
          "summary": {
            "totalEvents": 3,
            "taskCount": 1,
            "completedTasks": 1,
            "failedTasks": 0,
            "escalatedTasks": 0,
            "policyViolations": 0,
            "verifierVerdicts": 0,
            "speculationAborts": 0
          }
        }
      }
    }
  },
  "metadata": {
    "generatedAt": "2026-02-22T00:05:22.296Z",
    "generatedBy": "contract-validator"
  }
}
